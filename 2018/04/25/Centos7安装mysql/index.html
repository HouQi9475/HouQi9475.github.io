<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="不积跬步无以至千里"><title>Centos7安装mysql5.6 | 侯琪同学</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'fad3b1e8d82d357f42c1df68a1e1d6ee';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Centos7安装mysql5.6</h1><a id="logo" href="/.">侯琪同学</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Centos7安装mysql5.6</h1><div class="post-meta">Apr 25, 2018<span> | </span><span class="category"><a href="/categories/mysql/">mysql</a></span></div><div class="post-content"><p>Centos7将默认数据库mysql替换成了Mariadb，如果需要使用mysql需要自己安装。</p>
<h2 id="一，安装mysql"><a href="#一，安装mysql" class="headerlink" title="一，安装mysql"></a>一，安装mysql</h2><p>1.下载mysql的linux安装包。<br>2.卸载系统自带的Mariadb<br>3.打开终端<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mariadb   //查询已安装的mariadb</span><br><span class="line">rpm -e --nodeps 文件名   //卸载，文件名为刚查出来的</span><br></pre></td></tr></table></figure></p>
<p>4.删除/etc 目录下的 my.cnf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /etc/my.cnf</span><br></pre></td></tr></table></figure></p>
<p>5.执行命令创建MySQL用户组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br></pre></td></tr></table></figure></p>
<p>6.创建用户名为mysql的用户并加入到Mysql用户组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g mysql mysql</span><br></pre></td></tr></table></figure></p>
<p>7.将下载的压缩包ftp到/usr/local并解压<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf .......</span><br></pre></td></tr></table></figure></p>
<p>8.将解压好的文件夹重命名为mysql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv .... /usr/local/mysql</span><br></pre></td></tr></table></figure></p>
<p>9.在/etc下新建配置文件my.cnf,并添加内容<br>简单方法是copy一份/usr/local/mysql/suppport-files/下的my-default.cnf文件到/etc下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp my-default.cnf /etc/my.cnf</span><br></pre></td></tr></table></figure></p>
<p>10.编写配置文件内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[mysql]  </span><br><span class="line"># 设置mysql客户端默认字符集  </span><br><span class="line">default-character-set=utf8   </span><br><span class="line">socket=/var/lib/mysql/mysql.sock  </span><br><span class="line">  </span><br><span class="line">[mysqld]  </span><br><span class="line">skip-name-resolve  </span><br><span class="line">#设置3306端口  </span><br><span class="line">port = 3306   </span><br><span class="line">socket=/var/lib/mysql/mysql.sock  </span><br><span class="line"># 设置mysql的安装目录  </span><br><span class="line">basedir=/usr/local/mysql  </span><br><span class="line"># 设置mysql数据库的数据的存放目录  </span><br><span class="line">datadir=/usr/local/mysql/data  </span><br><span class="line"># 允许最大连接数  </span><br><span class="line">max_connections=200  </span><br><span class="line"># 服务端使用的字符集默认为8比特编码的latin1字符集  </span><br><span class="line">character-set-server=utf8  </span><br><span class="line"># 创建新表时将使用的默认存储引擎  </span><br><span class="line">default-storage-engine=INNODB  </span><br><span class="line">lower_case_table_name=1  </span><br><span class="line">max_allowed_packet=16M</span><br></pre></td></tr></table></figure></p>
<p>11.进入安装mysql软件目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql</span><br><span class="line">chown -R mysql:mysql ./ 修改当前目录拥有着为Mysql用户</span><br><span class="line">./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql/ --datadir=/usr/local/mysql/data/ 安装数据库</span><br></pre></td></tr></table></figure></p>
<p>12.若安装时出现以下错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FATAL ERROR: please install the following Perl modules before executing   ./scripts/mysql_install_db:Data::Dumper</span><br></pre></td></tr></table></figure></p>
<p>解决方法：需要安装autoconf库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install autoconf  //此包安装时会安装Data:Dumper模块</span><br></pre></td></tr></table></figure></p>
<p>重新执行上面安装代码<br>13.修改目前data目录的拥有着为mysql用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql data</span><br></pre></td></tr></table></figure></p>
<p><strong>到此数据库安装完成</strong></p>
<hr>
<h2 id="二，配置mysql"><a href="#二，配置mysql" class="headerlink" title="二，配置mysql"></a>二，配置mysql</h2><p>1,修改my.cnf权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 644 /etc/my.cnf</span><br></pre></td></tr></table></figure></p>
<p>必须为644，否则启动的时候会报下面的错误:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: World-writable config file &apos;/etc/my.cnf&apos; is ignored</span><br></pre></td></tr></table></figure></p>
<p>2,复制启动脚本到资源目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ./mysql/support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure></p>
<p>3,增加mysqld服务控制脚本执行权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure></p>
<p>4,将mysqld服务加到系统服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add mysqld</span><br></pre></td></tr></table></figure></p>
<p>5,检查mysqld服务是否生效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list mysqld</span><br></pre></td></tr></table></figure></p>
<p>出现下面效果说明生效，在2、3、4、5运行级别随系统启动而自动启动，以后可以使用service命令控制mysql的启动和停止<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br></pre></td></tr></table></figure></p>
<p>6,启动mysql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure></p>
<p>7,将mysql的bin目录加入到PATH环境变量，编辑 ~/.bash_profile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>在文件最后添加如下信息并保存：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/mysql/bin</span><br></pre></td></tr></table></figure></p>
<p>8,使修改内容生效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>9,以root账户登陆mysql，默认没有密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p    直接回车就行</span><br></pre></td></tr></table></figure></p>
<p>10,设置root账户密码为root<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use  mysql;</span><br><span class="line">update user set password=password(&apos;root&apos;) where user=&apos;root&apos; and host=&apos;localhost&apos;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></p>
<p>11,设置远程主机登陆，注意下面的your username和your password改成你需要的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &apos;your username&apos;@&apos;%&apos; IDENTIFIED BY &apos;your password&apos; WITH  GRANT OPTION;</span><br></pre></td></tr></table></figure></p>
<p><em>若启动时出现错误： mysqld_safe Directory ‘/var/lib/mysql’ for UNIX socket file don’t exists.<br>需要新建一个 mysql 目录，并赋予权限</em></p>
<hr>
<p><strong>大功告成！</strong></p>
</div><div class="tags"><a href="/tags/mysql/">mysql</a></div><div class="post-nav"><a class="next" href="/2018/04/24/springboot将jar包注册为Linux服务/">将springboot的jar包注册为Linux服务</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://www.houqi.tech"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/springboot/">springboot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/服务器/" style="font-size: 15px;">服务器</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/springboot/" style="font-size: 15px;">springboot</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/25/Centos7安装mysql/">Centos7安装mysql5.6</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/24/springboot将jar包注册为Linux服务/">将springboot的jar包注册为Linux服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/24/Cmd Markdown 编辑阅读器/">Cmd Markdown 编辑阅读器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/23/Centos7防火墙端口/">Centos7防火墙端口</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/HouQi9475/HouQi9475.github.io" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">侯琪同学.</a> 火箭总冠军.</div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>